<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <!-- <template id="report_invoice">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.invoice_user_id.sudo().lang if o.move_type in ('in_invoice', 'in_refund') else o.partner_id.lang"/>
                <t t-if="o._get_name_invoice_report() == 'account.report_invoice_document'"
                    t-call="account.report_invoice_document" t-lang="lang"/>
            </t>
        </t>
    </template>

    <template id="report_invoice_with_payments">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.invoice_user_id.sudo().lang if o.move_type in ('in_invoice', 'in_refund') else o.partner_id.lang"/>
                <t t-set="print_with_payments" t-value="True"/>
                <t t-if="o._get_name_invoice_report() == 'account.report_invoice_document'"
                    t-call="account.report_invoice_document" t-lang="lang"/>
            </t>
        </t>
    </template> -->



    <template id="report_variante_devis_parametrable_sans_prix">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="avec_prix_de_vente" t-value="False"/>
                <t t-call="is_bsa14.report_variante_devis_parametrable_document"/>
            </t>
        </t>
    </template>
    <template id="report_variante_devis_parametrable">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="avec_prix_de_vente" t-value="True"/>
                <t t-call="is_bsa14.report_variante_devis_parametrable_document"/>
            </t>
        </t>
    </template>
    <template id="report_variante_devis_parametrable_document">
        <t t-call="web.external_layout">
            <div class="page">
                <style>
                    body {
                        line-height: 1.2;
                    }

                    h1{
                        font-size: 14pt;
                        font-weight:bold;
                    }
                    h2{
                        font-size: 13pt;
                        font-weight:bold;
                    }
                    h3{
                        font-size: 12pt;
                        font-weight:bold;
                    }
                    .table-sm th, .table-sm td {
                        padding: 0.1rem;
                        padding-left:0.5em;
                        padding-right:0.5em;
                    }
                    .no_border_left_right{
                        border-left:0;
                        border-right:0;
                        color:red;
                    }
                </style>
                <h1><span t-field="o.quantite"/> x <span t-field="o.devis_id.designation"/></h1>
                <h2><span t-field="o.devis_id.designation_complementaire"/></h2>
                <t t-if="o.impression_matieres=='oui'">
                    <table class="table table-sm o_main_table">
                        <thead>
                            <tr>
                                <th class="text-center">Inox</th>
                                <th class="text-center">Type</th>
                                <th class="text-center">Finition intérieur</th>
                                <th class="text-center">Finition exterieur</th>
                                <th class="text-center">Ep.</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="o.devis_id.matiere_ids" t-as="l">
                                <tr t-if="l.imprimer">
                                    <td class="text-left">  <span t-field="l.section_id.name"/></td>
                                    <td class="text-center"><span t-field="l.matiere_id.type_matiere"/></td>
                                    <td class="text-center"><span t-field="l.matiere_id.finition_interieur"/></td>
                                    <td class="text-center"><span t-field="l.matiere_id.finition"/></td>
                                    <td class="text-right"> <span t-field="l.epaisseur"/>mm</td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>
                <t t-if="o.impression_dimensions=='oui'">
                    <h3>Dimensions : </h3>
                    <table class="table table-sm o_main_table">
                        <tbody>
                            <t t-foreach="o.devis_id.dimension_ids" t-as="l">
                                <t t-if="l.imprimer">
                                    <tr>
                                        <td class="text-left">  <span t-field="l.dimension_id.name"/></td>
                                        <td class="text-left">
                                            <span t-field="l.valeur"/><span t-field="l.unite_id.name"/>
                                            <span t-field="l.description"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </t>
                <t t-if="o.impression_equipements=='standard'">
                    <h3>Equipements : </h3>
                    <table class="table table-sm o_main_table">
                        <tbody>
                            <t t-foreach="o.devis_id.section_ids" t-as="section">
                                <tr style="border-bottom: 1px solid;">
                                    <td class="text-left"><span t-field="section.section_id.name"/></td>
                                    <td class="text-left">

                                        <t t-foreach="section.product_ids" t-as="l">
                                            <div t-field="l.description_report"/>
                                        </t>
                                    
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>

                <t t-if="o.impression_equipements=='detaillee'">
                    <table class="table table-sm o_main_table" style="border-left:0;border-right:0;">
                        <thead>
                            <tr>
                                <th style="border-left:0;border-right:0;" class="text-center">Pos</th>
                                <th style="border-left:0;border-right:0;" class="text-center">Description</th>
                                <th style="border-left:0;border-right:0;" class="text-center">Quantité</th>
                                <th style="border-left:0;border-right:0;" class="text-right text-nowrap">Prix unitaire</th>
                                <th style="border-left:0;border-right:0;" class="text-right text-nowrap">Montant HT</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="pos" t-value="1"/>
                            <t t-if="o.devis_id.descriptif">
                                <tr style="border-bottom: 1px solid">
                                    <td style="border-left:0;border-right:0;" class="text-center"><span t-esc="pos"/></td>
                                    <td style="border-left:0;border-right:0;" class="text-left">
                                        <div t-field="o.devis_id.descriptif"/>
                                    </td>
                                    <td style="border-left:0;border-right:0;" class="text-center">1</td>
                                    <td style="border-left:0;border-right:0;" class="text-right"><span t-field="o.montant_bassin_marge_devise"/></td>
                                    <td style="border-left:0;border-right:0;" class="text-right"><span t-field="o.montant_bassin_marge_devise"/></td>
                                </tr>
                                <t t-set="pos" t-value="pos+1"/>
                            </t>
                            <t t-foreach="o.devis_id.section_ids" t-as="section">
                                <t t-foreach="section.product_ids" t-as="l">
                                    <tr style="border-bottom: 1px solid">
                                        <td style="border-left:0;border-right:0;" class="text-center"><span t-esc="pos"/></td>
                                        <td style="border-left:0;border-right:0;" class="text-left">
                                            <b><div t-field="l.description"/></b>
                                            <div t-if="l.description_detaillee" t-field="l.description_detaillee"/>
                                        </td>
                                        <td style="border-left:0;border-right:0;" class="text-center"><span t-field="l.quantite"/></td>
                                        <td style="border-left:0;border-right:0;" class="text-right"><span t-field="l.prix_avec_marge_devise"/></td>
                                        <td style="border-left:0;border-right:0;" class="text-right"><span t-field="l.montant_avec_marge_devise"/></td>
                                    </tr>
                                    <t t-set="pos" t-value="pos+1"/>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </t>
                <t t-if="o.impression_options=='oui'">
                    <t t-if="o.devis_id.montant_option_thermo">
                        <h3>Thermorégulation : </h3>
                        <table class="table table-sm o_main_table">
                            <tbody>
                                <t t-foreach="o.devis_id.options_ids" t-as="option">
                                    <tr t-if="option.option_active and option.thermoregulation" style="border-bottom: 1px solid;">
                                        <td class="text-left">  <span t-field="option.description_client"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </t>
                    <t t-if="(o.devis_id.montant_option_comprise-o.devis_id.montant_option_thermo)>0">
                        <h3>Options comprises : </h3>
                        <table class="table table-sm o_main_table">
                            <tbody>
                                <t t-foreach="o.devis_id.options_ids" t-as="option">
                                    <tr t-if="option.option_active and option.option_comprise and not option.thermoregulation" style="border-bottom: 1px solid;">
                                        <td class="text-left"> <span t-field="option.description_client"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </t>
                </t>
                <div class="row" t-if="avec_prix_de_vente">
                    <div class="col-6 ml-auto">
                        <table class="table table-sm o_main_table" style="page-break-inside: avoid;">
                            <tr>
                                <td><strong>Prix unitaire HT</strong></td>
                                <td class="text-right" style="width:40mm"><span t-field="o.prix_vente_int_devise"/> <span t-field="o.devise_client_id.symbol"/></td>
                            </tr>
                            <t t-if="o.montant_remise_devise">
                                <tr>
                                    <td><strong><span t-field="o.intitule_remise_devise"/></strong></td>
                                    <td class="text-right"><span t-field="o.montant_remise_devise"/> <span t-field="o.devise_client_id.symbol"/></td>
                                </tr>
                                <tr>
                                    <td><strong>Prix unitaire avec remise HT</strong></td>
                                    <td class="text-right"><span t-field="o.prix_vente_remise_devise"/> <span t-field="o.devise_client_id.symbol"/></td>
                                </tr>
                            </t>
                            </table>
                        <div t-if="o.afficher_prix_par_hl" style="font-style: italic;">
                            Prix par HL : <span t-field="o.prix_par_hl_devise"/> <span t-field="o.devise_client_id.symbol"/>
                        </div>
                    </div>
                </div>
                <t t-if="o.impression_options=='oui'">
                    <t t-if="(o.devis_id.montant_option_active-o.devis_id.montant_option_comprise)>0">
                        <h3>Autres Options non comprises : </h3>
                        <table class="table table-sm o_main_table">
                            <tbody>
                                <t t-foreach="o.devis_id.options_ids" t-as="option">
                                    <tr t-if="option.option_active and not option.option_comprise " style="border-bottom: 1px solid;">
                                        <td class="text-left">  <span t-field="option.description_client"/></td>
                                        <td class="text-right" style="width:40mm"><span t-esc="o.get_montant_option(option)"/> € HT</td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </t>
                </t>
            </div>
        </t>
    </template>

















    <template id="report_variante_devis_parametrable_parametre">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <style>
                            h1{
                                font-size: 15pt;
                                font-weight:bold;
                            }
                            h2{
                                font-size: 13pt;
                                font-weight:bold;
                                margin-top:5mm;
                            }
                            .o_report_layout_boxed .page > table:not(.o_main_table) tr td:last-child {
                                background-color: white;
                            }
                            .o_report_layout_boxed table {
                                border: none;
                            }
                            .o_report_layout_boxed table tbody tr td,th {
                                border-top: none;
                                border-right: none;
                                border-left: none;
                                border-bottom: 1px solid #495057;
                                vertical-align: top;
                                font-size: 10pt;
                            }
                            .o_report_layout_boxed th {
                                white-space: nowrap;
                                text-align:left;
                            }
                             .o_report_layout_boxed td {
                                text-align:right;
                                font-weight:normal;
                            }
                         </style>
                        <h1><span t-field="o.description"/></h1>
                        <table style="width:100%">
                            <tr>
                                <th style="width:45%;border-bottom:none">
                                    <h2>Paramètres</h2>
                                    <table style="width:100%">
                                        <tr><th>Devis paramètrable</th><td><span t-field="o.devis_id"/></td></tr>
                                        <tr><th>Société commerciale</th><td><span t-field="o.is_societe_commerciale_id"/></td></tr>
                                        <tr><th>Client</th><td><span t-field="o.partner_id"/></td></tr>
                                        <tr><th>Nom</th><td><span t-field="o.name"/></td></tr>
                                        <tr><th>Qt prévue</th><td><span t-field="o.quantite"/></td></tr>
                                        <tr><th>Coût horaire montage</th><td><span t-field="o.cout_horaire_montage"/></td></tr>
                                        <tr><th>Coût horaire BE</th><td><span t-field="o.cout_horaire_be"/></td></tr>
                                        <tr><th>Coût de transport</th><td><span t-field="o.cout_transport"/></td></tr>
                                        <tr><th>Marge matière (%)</th><td><span t-field="o.marge_matiere"/></td></tr>
                                        <tr><th>Marge équipement (%)</th><td><span t-field="o.marge_equipement"/></td></tr>
                                        <tr><th>Marge options (%)</th><td><span t-field="o.marge_option"/></td></tr>
                                        <tr><th>Marge MO (%)</th><td><span t-field="o.marge_montage"/></td></tr>
                                        <tr><th>Marge BE (%)</th><td><span t-field="o.marge_be"/></td></tr>
                                        <tr><th>Marge revendeur (%)</th><td><span t-field="o.marge_revendeur"/></td></tr>
                                        <tr><th>Gain de productivité (%)</th><td><span t-field="o.gain_productivite"/></td></tr>
                                        <tr><th>Remise</th><td><span t-field="o.remise"/></td></tr>
                                        <tr><th>Remise (%)</th><td><span t-field="o.remise_pourcent"/></td></tr>
                                    </table>
                                </th>
                                <th style="width:10%;border-bottom:none"/>
                                <th style="width:45%;border-bottom:none">
                                    <h2>Temps unitaire</h2>
                                    <table style="width:100%">
                                        <tr><th>Tps montage (HH:MM)</th><td><span t-field="o.devis_id.tps_montage" t-options='{"widget": "float_time"}'/></td></tr>
                                        <tr><th>Tps assemblage (HH:MM)</th><td><span t-field="o.tps_assemblage" t-options='{"widget": "float_time"}'/></td></tr>
                                        <tr><th>Tps majoration (HH:MM)</th><td><span t-field="o.tps_majoration" t-options='{"widget": "float_time"}'/></td></tr>
                                        <tr><th>Tps minoration (HH:MM)</th><td><span t-field="o.tps_minoration" t-options='{"widget": "float_time"}'/></td></tr>
                                        <tr><th>Tps total hors BE (HH:MM)</th><td><span t-field="o.tps_total" t-options='{"widget": "float_time"}'/></td></tr>
                                        <tr><th>Tps BE (HH:MM)</th><td><span t-field="o.tps_be" t-options='{"widget": "float_time"}'/></td></tr>
                                     </table>
                                </th>
                            </tr>
                            <tr>
                                <th style="width:45%;border-bottom:none">
                                    <h2>Prix de revient de l'affaire</h2>
                                    <table style="width:100%">
                                        <tr>
                                            <th>Montant matière</th>
                                            <td><span t-att-style="'display:block;margin:1mm;height:4mm;width: %smm;background-color:#495057' % (int(o.montant_matiere_pourcent/2))"></span></td>
                                            <td><span t-esc="int(o.montant_matiere_pourcent)"/>%</td>
                                            <td><span t-field="o.montant_matiere"/></td>
                                        </tr>
                                        <tr>
                                            <th>Montant equipements</th>
                                            <td><span t-att-style="'display:block;margin:1mm;height:4mm;width: %smm;background-color:#495057' % (int(o.montant_equipement_pourcent/2))"></span></td>
                                            <td><span t-esc="int(o.montant_equipement_pourcent)"/>%</td>
                                            <td><span t-field="o.montant_equipement"/></td>
                                        </tr>
                                        <tr>
                                            <th>Montant options</th>
                                            <td><span t-att-style="'display:block;margin:1mm;height:4mm;width: %smm;background-color:#495057' % (int(o.montant_option_pourcent/2))"></span></td>
                                            <td><span t-esc="int(o.montant_option_pourcent)"/>%</td>
                                            <td><span t-field="o.montant_option"/></td>
                                        </tr>
                                        <tr>
                                            <th>Montant MO</th>
                                            <td><span t-att-style="'display:block;margin:1mm;height:4mm;width: %smm;background-color:#495057' % (int(o.montant_montage_productivite_pourcent/2))"></span></td>
                                            <td><span t-esc="int(o.montant_montage_productivite_pourcent)"/>%</td>
                                            <td><span t-field="o.montant_montage_productivite"/></td>
                                        </tr>
                                        <tr>
                                            <th>Montant BE</th>
                                            <td><span t-att-style="'display:block;margin:1mm;height:4mm;width: %smm;background-color:#495057' % (int(o.montant_be_pourcent/2))"></span></td>
                                            <td><span t-esc="int(o.montant_be_pourcent)"/>%</td>
                                            <td><span t-field="o.montant_be"/></td>
                                        </tr>
                                        <tr>
                                            <th>Montant transport</th>
                                            <td><span t-att-style="'display:block;margin:1mm;height:4mm;width: %smm;background-color:#495057' % (int(o.montant_transport_pourcent/2))"></span></td>
                                            <td><span t-esc="int(o.montant_transport_pourcent)"/>%</td>
                                            <td><span t-field="o.montant_transport"/></td>
                                        </tr>
                                        <tr>
                                            <th>Montant total</th>
                                            <td></td>
                                            <td></td>
                                            <td><span t-field="o.montant_total"/></td>
                                        </tr>
                                     </table>
                                </th>
                                <th style="width:10%;border-bottom:none"/>
                                <th style="width:45%;border-bottom:none">
                                    <h2>Prix de revient unitaire</h2>
                                    <table style="width:100%">
                                        <tr><th>Montant unitaire HT</th><td><span t-field="o.montant_unitaire"/></td></tr>
                                     </table>
                                </th>
                            </tr>
                            <tr>
                                <th style="width:45%;border-bottom:none">
                                    <h2>Prix de vente de l'affaire</h2>
                                    <table style="width:100%">
                                        <tr><th>Prix de vente de l'affaire</th><td><span t-field="o.prix_vente_lot"/></td></tr>
                                        <tr><th>Prix de vente revendeur de l'affaire</th><td><span t-field="o.prix_vente_revendeur_lot"/></td></tr>
                                        <tr><th>Marge de l'affaire</th><td><span t-field="o.montant_marge_lot"/></td></tr>
                                        <tr><th>Marge revendeur de l'affaire</th><td><span t-field="o.montant_marge_revendeur_lot"/></td></tr>
                                    </table>
                                    <h2>Prix de vente unitaire (Devise)</h2>
                                    <table style="width:100%">
                                        <tr><th>Devise client</th><td><span t-field="o.devise_client_id"/></td></tr>
                                        <tr><th>Taux devise</th><td><span t-field="o.taux_devise"/></td></tr>
                                        <tr><th>Prix de vente HT (devise)</th><td><span t-field="o.prix_vente_devise"/></td></tr>
                                        <tr><th>Prix de vente HT (arrondi)(devise)</th><td><span t-field="o.prix_vente_int_devise"/></td></tr>
                                        <tr><th>Intitulé remise</th><td><span t-field="o.intitule_remise_devise"/></td></tr>
                                        <tr><th>Prix de vente remisé (devise)</th><td><span t-field="o.prix_vente_remise_devise"/></td></tr>
                                        <tr><th>Prix par HL (devise)</th><td><span t-field="o.prix_par_hl_devise"/></td></tr>
                                    </table>
                                    <div>Commentaire : <span t-field="o.commentaire"/></div> 
                                </th>
                                <th style="width:10%;border-bottom:none"/>
                                <th style="width:45%;border-bottom:none">
                                    <h2>Prix de vente unitaire</h2>
                                    <table style="width:100%">
                                        <tr><th>Prix de vente HT</th><td><span t-field="o.prix_vente"/></td></tr>
                                        <tr><th>Prix de vente HT (arrondi)</th><td><span t-field="o.prix_vente_int"/></td></tr>
                                        <tr><th>Intitulé remise</th><td><span t-field="o.intitule_remise"/></td></tr>
                                        <tr><th>Prix de vente remisé</th><td><span t-field="o.prix_vente_remise"/></td></tr>
                                        <tr><th>Marge</th><td><span t-field="o.montant_marge"/></td></tr>
                                        <tr><th>Taux de marge brute (%)</th><td><span t-field="o.taux_marge_brute"/></td></tr>
                                        <tr><th>Taux de marge commerciale</th><td><span t-field="o.taux_marge_commerciale"/></td></tr>
                                        <tr><th>Prix de vente revendeur</th><td><span t-field="o.prix_vente_revendeur"/></td></tr>
                                        <tr><th>Marge revendeur</th><td><span t-field="o.montant_marge_revendeur"/></td></tr>
                                        <tr><th>Prix par HL</th><td><span t-field="o.prix_par_hl"/></td></tr>
                                        <tr><th>Affiche prix par HL</th><td><span t-field="o.afficher_prix_par_hl"/></td></tr>
                                     </table>
                                </th>
                            </tr>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>




















    <template id="report_devis_parametrable_affaire">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <style>
                        h3{
                            font-size:14pt;
                            font-weight:bold;
                            padding:0;
                            margin:0;
                            margin-bottom:1mm;
                            margin-top:3mm;
                        }
                    </style>

                    <div class="page">


                        <t t-if="o.descriptif_affaire_suite">
                            <div t-field="o.descriptif_affaire_suite"/>
                        </t>

                        <t t-if="len(o.variante_ids)>0">
                            <h3>Récapitulatif de l'offre</h3>
                            <table class="table table-sm o_main_table">
                                <thead>
                                    <tr>
                                        <th class="text-left">Description</th>
                                        <th class="text-center">Capacité</th>
                                        <th class="text-right">Prix unitaire</th>
                                        <th class="text-center">Quantité prévue</th>
                                        <th class="text-right">Montant HT</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="o.variante_ids" t-as="variante">
                                        <tr style="border-bottom: 1px solid;">
                                            <td class="text-left"><span t-field="variante.variante_id.devis_id.designation"/></td>
                                            <td class="text-center"><span t-field="variante.variante_id.devis_id.capacite_txt"/></td>
                                            <td class="text-right"><span t-field="variante.prix_vente_remise_devise"/> <span t-field="o.devise_client_id.symbol"/></td>
                                            <td class="text-center"><span t-field="variante.quantite"/></td>
                                            <td t-if="variante.quantite>0"  class="text-right"><span t-field="variante.montant"/> <span t-field="o.devise_client_id.symbol"/></td>
                                            <td t-if="variante.quantite==0" class="text-right">0,00 <span t-field="o.devise_client_id.symbol"/></td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                            <div class="row">
                                <div class="col-6 ml-auto">
                                    <table class="table table-sm o_main_table" style="page-break-inside: avoid;">
                                        <tr>
                                            <td><strong>Total HT</strong></td>
                                            <td class="text-right"><span t-field="o.montant_ht"/></td>
                                        </tr>
                                        <tr>
                                            <td><strong>TVA</strong></td>
                                            <td class="text-right"><span t-field="o.montant_tva"/></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Total TTC</strong></td>
                                            <td class="text-right"><span t-field="o.montant_ttc"/></td>
                                        </tr>
                                    </table>
                                    <div t-if="o.capacite" style="font-style: italic;">
                                        Capacité totale de <span t-field="o.capacite"/>HL soit <span t-field="o.prix_par_hl"/> <span t-field="o.devise_client_id.symbol"/> HT par HL
                                    </div>
                                </div>
                            </div>
                        </t>
                        <t t-if="o.conditions_particulieres">
                            <h3>Conditions particulières</h3>
                            <div t-field="o.conditions_particulieres"/>
                        </t>
                        <t t-if="o.information_technique">
                            <h3>Informations techniques</h3>
                            <div t-field="o.information_technique"/>
                        </t>
                        <t t-if="o.information_complementaire">
                            <h3>Informations complémentaires</h3>
                            <div t-field="o.information_complementaire"/>
                        </t>
                        <t t-if="o.conditions_reglement">
                            <h3>Conditions de règlement</h3>
                            <div t-field="o.conditions_reglement"/>
                        </t>
                        <t t-if="o.delais">
                            <h3>Délais</h3>
                            <div t-field="o.delais"/>
                        </t>
                        <t t-if="o.duree_validite">
                            <h3>Durée de validité de l'offre</h3>
                            <div t-field="o.duree_validite"/>
                        </t>
                        <t t-if="o.transport">
                            <h3>Transport</h3>
                            <div t-field="o.transport"/>
                        </t>
                        <t t-if="o.conditions_generales">
                            <h3>Conditions générales de ventes</h3>
                            <div t-field="o.conditions_generales"/>
                        </t>
                        <t t-if="o.vendeur_id">
                            <h3>Chargé d'affaire</h3>
                            <div t-field="o.vendeur_id"/>
                        </t>
                        <t t-if="o.date_modification">
                            <div>Fait à Saint-Amour le <span t-field="o.date_modification"/></div>
                        </t>
                        <img t-if="o.vendeur_id.is_image_signature" t-att-src="image_data_uri(o.vendeur_id.is_image_signature)" style="max-height: 25mm;"/>
                        <div style="text-align:center;margin-top:5mm">
                            <img 
                                t-if="o.is_societe_commerciale_id.made_in" 
                                t-att-src="image_data_uri(o.is_societe_commerciale_id.made_in)" 
                                style="max-height:30mm"
                            />
                        </div>
                        <!-- <div style="text-align:center;margin-top:5mm">
                            <img src='/is_bsa14/static/src/img/made-in-jura.jpg' style="height:30mm" />
                        </div>-->
                    </div>
                </t>
            </t>
        </t>
    </template>



    <template id="report_devis_parametrable_affaire_entete">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <style>
                            .o_report_layout_boxed .page > table:not(.o_main_table) tr td:last-child {
                                background-color: white;
                            }
                            .o_report_layout_boxed table tbody tr td {
                                border-right: none;
                            }
                            th, td {
                                padding: 0.2rem;
                                padding-left:0;
                                line-height: 1.1;
                                background-color : white;
                                color:black;
                                font-size:12pt;
                                vertical-align: top;
                            }
                            td {
                                white-space: nowrap;
                            }
                        </style>
                        <t t-if="o.is_societe_commerciale_id.id">
                            <div style="text-align:center">
                                <img 
                                    t-if="o.is_societe_commerciale_id.logo" 
                                    t-att-src="image_data_uri(o.is_societe_commerciale_id.logo)" 
                                    style="max-height:25mm;max-width:80mm;"
                                />
                                <div style="margin-top:1mm;font-size:11pt" t-field="o.is_societe_commerciale_id.slogan"/>
                                <div style="margin-top:5mm;font-size:22pt;font-weight:bold;color:black">Offre de prix</div>
                            </div>
                        </t>
                        <br />
                        <table style="width:100%;border:none; border-top:1px solid black">
                            <tr>
                                <th style="width:35mm">Client : </th>
                                <th style="font-size:14pt"><span t-field="o.partner_id.name"/></th>
                                <t t-if="o.partner_id.image_1920">
                                    <td rowspan="3" style="width:10mm;text-align:right">
                                        <img  t-att-src="image_data_uri(o.partner_id.image_1920)" style="max-width:100mm;max-height:60mm;"/>
                                    </td>
                                </t>
                            </tr>
                            <tr>
                                <th>À l'attention de : </th>
                                <td><span t-field="o.attention_de"/></td>
                            </tr>
                            <tr>
                                <th>Adresse : </th>
                                <td>
                                    <div t-field="o.partner_id.street"/>
                                    <div t-if="o.partner_id.street2" t-field="o.partner_id.street2"/>
                                    <span t-field="o.partner_id.zip"/> <span t-field="o.partner_id.city"/>
                                </td>
                            </tr>
                        </table>
                        <div style="height:10mm"/>
                        <table style="width:100%;border:none; border-top:1px solid black">
                            <tr>
                                <th style="width:35mm;color:black">Devis N° : </th>
                                <th style="font-size:14pt"><span t-field="o.code_affare"/></th>
                                <t t-if="o.image_affaire">
                                    <td rowspan="5" style="width:10mm;text-align:right">
                                        <img  t-att-src="image_data_uri(o.image_affaire)" style="max-width:100mm;max-height:60mm;"/>
                                    </td>
                                </t>
                            </tr>
                            <tr>
                                <th>Affaire : </th>
                                <td><span t-field="o.name"/></td>
                            </tr>
                            <tr>
                                <th>Date : </th>
                                <td><span t-field="o.date_modification"/></td>
                            </tr>
                            <tr>
                                <th>Version : </th>
                                <td><span t-field="o.version"/></td>
                            </tr>
                            <tr>
                                <th>Chargé d'affaire : </th>
                                <td><span t-field="o.vendeur_id.name"/></td>
                            </tr>
                        </table>
                        <div style="height:5mm"/>
                        <div style="text-align:center;border-top: 1px solid black;border-bottom:1px solid black;">
                            <div style="padding:2mm;font-size:22pt;font-weight:bold;color:black">Descriptif de l'affaire</div>
                        </div>

                        <t t-if="o.descriptif_affaire">
                            <div t-field="o.descriptif_affaire"/>
                        </t>

                        <div style="font-size:13pt;text-align:left;color:black;font-weight:bold;">
                            <t t-foreach="o.variante_ids" t-as="variante">
                                <div style="padding-top:5mm;padding-left:33mm">
                                    - <span t-field="variante.variante_id.quantite"/> x 
                                    <span t-field="variante.variante_id.devis_id.designation"/>
                                </div>
                            </t>
                        </div>
                        <div style="text-align:center;margin-top:10mm">
                            <img 
                                t-if="o.is_societe_commerciale_id.made_in" 
                                t-att-src="image_data_uri(o.is_societe_commerciale_id.made_in)" 
                                style="max-height:30mm"
                            />
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>





        <!-- is.devis.parametrable.variante -->
        <!-- <record id="is_devis_parametrable_variante_tree" model="ir.ui.view">
            <field name="name">is_devis_parametrable_variante_tree</field>
            <field name="model">is.devis.parametrable.variante</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="devis_id"/>
                    <field name="is_societe_commerciale_id" optional="show"/>
                    <field name="partner_id" optional="show"/>
                    <field name="devise_client_id" optional="hide"/>
                    <field name="name" optional="show"/>
                    <field name="quantite" optional="show"/>
                    <field name="montant_unitaire"       optional="show"/>
                    <field name="prix_vente"             optional="show"/>
                    <field name="montant_marge"          optional="show"/>
                    <field name="taux_marge_commerciale" optional="show"/>
                </tree>
            </field>
        </record> -->


</odoo>
