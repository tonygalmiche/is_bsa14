<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Liste des pointages appellée depuis la fiche de l'employee -->
        <record model="ir.actions.act_window" id="is_pointage_action2">
            <field name="context">{'default_employee': active_id, 'search_default_employee': active_id}</field>
            <field name="name">Pointages</field>
            <field name="res_model">is.pointage</field>
            <field name="view_mode">tree,form</field>
        </record>

        <!-- Liste des badges appellée depuis la fiche de l'employee -->
        <record model="ir.actions.act_window" id="is_badge_action2">
            <field name="context">{'default_employee': active_id, 'search_default_employee': active_id}</field>
            <field name="name">Badges</field>
            <field name="res_model">is.badge</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="is_view_employee_form" model="ir.ui.view">
            <field name="name">is_view_employee_form</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="arch" type="xml">
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" name="%(is_badge_action2)d" type="action" icon="fa-user">
                        <div class="o_stat_info">
                            <span class="o_stat_value">
                                <field name="is_badge_count"/>
                            </span>
                            <span class="o_stat_text">Badge</span>
                        </div>
                    </button>
                    <button class="oe_stat_button" name="%(is_pointage_action2)d" type="action" icon="fa-clock">
                        <div class="o_stat_info">
                            <span class="o_stat_value">
                                <field name="is_pointage_count"/>
                            </span>
                            <span class="o_stat_text">Pointages</span>
                        </div>
                    </button>
                </div>
                <page name="public" position="after">
                    <page string="Horaires">
                        <group>
                            <field name="is_workcenter_ids" widget="many2many_tags" />
                        </group>
                    </page>
                    <page string="Pointage">
                        <group>
                            <group string="Paramètrage">
                                <field name="is_matricule"/>
                                <field name="is_categorie"/>
                                <field name="is_interimaire"/>
                            </group>
                            <group string="Horaires">
                                <field name="is_jour1"/>
                                <field name="is_jour2"/>
                                <field name="is_jour3"/>
                                <field name="is_jour4"/>
                                <field name="is_jour5"/>
                                <field name="is_jour6"/>
                                <field name="is_jour7"/>
                            </group>
                        </group>
                    </page>
                </page>
            </field>
        </record>
        <record id="is_view_employee_tree" model="ir.ui.view">
            <field name="name">is.hr.employee.tree</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_tree"/>
            <field name="arch" type="xml">
                <field name="work_phone" position="replace">
                    <field name="is_matricule"/>
                </field>
                <field name="work_email" position="replace">
                    <field name="is_categorie"/>
                </field>
                <field name="department_id" position="after">
                    <field name="is_interimaire"/>
                    <field name="is_jour1" optional="hide"/>
                    <field name="is_jour2" optional="hide"/>
                    <field name="is_jour3" optional="hide"/>
                    <field name="is_jour4" optional="hide"/>
                    <field name="is_jour5" optional="hide"/>
                    <field name="is_jour6" optional="hide"/>
                    <field name="is_jour7" optional="hide"/>
                </field>
                <field name="job_id" position="replace" />
                <field name="parent_id" position="replace" />
            </field>
        </record>
        <record id="is_view_employee_filter" model="ir.ui.view">
            <field name="name">is_view_employee_filter</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_filter"/>
            <field name="arch" type="xml">
                    <field name="name" position="after">
                        <field name="is_matricule"/>
                        <field name="is_categorie"/>
                        <field name="is_interimaire"/>
                    </field>

                    <filter name="activities_upcoming_all" position="after">
                        <filter string="Employés"     name="is_interimaire" domain="[('is_interimaire','!=',True)]" />
                        <filter string="Intérimaires" name="is_interimaire" domain="[('is_interimaire','=',True)]" />
                    </filter>
                    <filter name="group_job" position="after">
                        <filter name="group_is_categorie"   string="Catégorie"   context="{'group_by': 'is_categorie'}"/>
                        <filter name="group_is_interimaire" string="Intérimaire" context="{'group_by': 'is_interimaire'}"/>
                    </filter>
             </field>
         </record>
        <!-- Pour surcharger une action (ici changer l'ordre des vues), il suffit de mettre le même id que l'action d'origine (et son module en préfix) -->
        <record id="hr.open_view_employee_list_my" model="ir.actions.act_window">
            <field name="view_mode">tree,kanban,form,activity</field>
        </record>
    </data>
</odoo>
