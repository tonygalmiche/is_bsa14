<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>


        <!-- is.devis.parametrable.affaire -->
        <record id="is_devis_parametrable_affaire_tree" model="ir.ui.view">
            <field name="name">is.devis.parametrable.affaire.tree</field>
            <field name="model">is.devis.parametrable.affaire</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="date_modification"         optional="show"/>
                    <field name="partner_id"                optional="show"/>
                    <field name="name"                      optional="show"/>
                    <field name="code_affare"               optional="show"/>
                    <field name="version"                   optional="show"/>
                    <field name="type_devis"                optional="hide"/>
                    <field name="attention_de"              optional="show"/>
                    <field name="is_societe_commerciale_id" optional="show"/>
                    <field name="vendeur_id"                optional="hide"/>

                    <field name="montant_ht"                 optional="hide"/>
                    <field name="capacite"                   optional="hide"/>
                    <field name="prix_par_hl"                optional="hide"/>
                    <field name="date_affaire"               optional="hide"/>
                    <field name="conditions_particulieres"   optional="hide"/>
                    <field name="information_technique"      optional="hide"/>
                    <field name="information_complementaire" optional="hide"/>
                    <field name="conditions_reglement"  optional="hide"/>
                    <field name="delais"                optional="show"/>
                    <field name="duree_validite"        optional="show"/>
                    <field name="transport"             optional="hide"/>
                    <field name="conditions_generales"  optional="hide"/>
                </tree>
            </field>
        </record>
        <record id="is_devis_parametrable_affaire_form" model="ir.ui.view">
            <field name="name">is.devis.parametrable.affaire.form</field>
            <field name="model">is.devis.parametrable.affaire</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button 
                            name="generer_pdf_action" 
                            string="Générer le PDF complet" type="object" 
                        />
                    </header>
                    <sheet>
                        <style>
                            .o_form_label{
                                white-space: nowrap;
                            }
                        </style>
                        <group>
                            <group>
                                <field name="is_societe_commerciale_id"/>
                                <field name="partner_id"/>
                                <field name="name"/>
                                <field name="code_affare"/>
                                <field name="code_affare_force"/>
                                <field name="version"/>
                                <field name="attention_de"/>
                                <field name="date_affaire"/>
                                <field name="date_modification"/>
                                <field name="lead_id"/>
                            </group>
                            <group>
                                <field name="image_affaire" widget='image'/>
                            </group>
                        </group>
                        <group string="Descriptif de l'affaire">
                            <field name="descriptif_affaire"       options="{'style-inline': true}" nolabel="1"/>
                        </group>
                        <group>
                            <field name="descriptif_affaire_suite" options="{'style-inline': true}" nolabel="1"/>
                        </group>
                        <group string="Conditions">
                            <field name="conditions_particulieres"/>
                            <field name="information_technique"/>
                            <field name="information_complementaire"/>
                            <field name="conditions_reglement"/>
                            <field name="delais"/>
                            <field name="duree_validite"/>
                            <field name="transport"/>
                            <field name="conditions_generales"/>
                            <field name="vendeur_id"/>
                        </group>
                        <group string="Variantes des devis">
                            <field name="variante_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="sequence" widget="handle" />
                                    <button title="Variante" name="acceder_variante_action" type="object" icon="fa-search-plus"/>
                                    <field name="affaire_id" invisible="1"/>
                                    <field 
                                        name="variante_id"
                                        domain="[('partner_id','=',parent.partner_id)]"
                                    />
                                    <field name="capacite" sum="Total"            optional="show"/>
                                    <field name="unite"                           optional="show"/>
                                    <field name="montant_marge"       sum="Total" optional="show"/>
                                    <field name="quantite"            sum="Total" optional="show"/>
                                    <field name="sous_total_capacite" sum="Total" optional="show"/>
                                    <field name="sous_total_marge"    sum="Total" optional="show"/>
                                    <field name="prix_a_afficher"            optional="hide"/>
                                    <field name="prix_vente_remise_devise"   optional="show"/>
                                    <field name="montant" sum="Total"        optional="show"/>
                                    <field name="devise_client_id"           optional="hide"/>
                                </tree>
                            </field>
                        </group>
                        <group>
                            <field name="type_devis"/>
                            <field name="devise_client_id"/>
                            <field name="montant_ht"/>

                            <field name="capacite"    attrs="{'invisible':[('capacite','=',0)]}"/>
                            <field name="prix_par_hl" attrs="{'invisible':[('capacite','=',0)]}"/>

                            <field name="tax_id"/>
                            <field name="montant_tva"/>
                            <field name="montant_ttc"/>
                        </group>
                        <group string="Entête et pied à ajouter">
                            <field name="entete_ids"        widget="many2many_binary"/>
                            <field name="recapitulatif_ids" widget="many2many_binary"/>
                            <field name="pied_ids"          widget="many2many_binary"/>
                        </group>

                        <group string="Devis généré">
                            <field name="devis_ids" widget="many2many_binary" readonly="1"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>
        <record id="is_devis_parametrable_affaire_search" model="ir.ui.view">
            <field name="name">is.devis.parametrable.affaire.search</field>
            <field name="model">is.devis.parametrable.affaire</field>
            <field name="arch" type="xml">
                <search>
                    <field name="partner_id"/>
                    <field name="name"/>
                    <field name="code_affare"/>
                    <field name="attention_de"/>
                    <field name="is_societe_commerciale_id"/>
                    <field name="vendeur_id"/>
               </search>
            </field>
        </record>
        <record id="is_devis_parametrable_affaire_action" model="ir.actions.act_window">
            <field name="name">Affaire</field>
            <field name="res_model">is.devis.parametrable.affaire</field>
            <field name="view_mode">tree,form</field>
        </record>


        <!-- is.devis.parametrable -->
        <record id="is_devis_parametrable_seq" model="ir.sequence">
            <field name="name">Devis paramètrable</field>
            <field name="code">is.devis.parametrable</field>
            <field name="padding">5</field>
            <field eval="False" name="company_id"/>
        </record>
        <record id="is_devis_parametrable_tree" model="ir.ui.view">
            <field name="name">is.devis.parametrable.tree</field>
            <field name="model">is.devis.parametrable</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="date_creation"    optional="show"/>
                    <field name="partner_id"             optional="show"     class="test_scss"/>
                    <field name="nom_affaire"            optional="show"     class="test_scss"/>
                    <field name="name" class="test_scss2"/>
                    <field name="version"/>
                    <field name="type_devis"/>
                    <field name="type_cuve_id"           optional="show"     class="test_scss"/>
                    <field name="designation"            optional="show"     class="test_scss"/>
                    <field name="designation_complementaire" optional="show" class="test_scss"/>
                    <field name="capacite"         optional="show"/>
                    <field name="unite"            optional="show"/>
                    <field name="is_societe_commerciale_id" optional="show"/>
                    <field name="createur_id"      optional="show"/>
                    <field name="commentaire"      optional="hide"/>
                    <field name="total_equipement" optional="show" sum="Total"/>
                    <field name="duree_totale"     optional="hide" sum="Total" widget="float_time"/>
                </tree>
            </field>
        </record>
        <record id="is_devis_parametrable_form" model="ir.ui.view">
            <field name="name">is.devis.parametrable.form</field>
            <field name="model">is.devis.parametrable</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button
                            name="creation_section_action"
                            type="object"
                            string="Nouvelle section"
                        />
                        <button
                            name="creation_variante_action"
                            type="object"
                            string="Nouvelle variante"
                        />
                        <button
                            name="actualiser_prix_action"
                            type="object"
                            string="Actualiser les prix"
                        />
                        <button
                            name="recalculer_action"
                            type="object"
                            string="Actualiser le calculateur"
                        />
                    </header>
                    <sheet>
                        <style>
                            body{
                                line-height:1.2;
                            }
                            .o_form_view .o_form_sheet_bg > .o_form_sheet{
                                max-width: 1800px;
                            }

                            .modal-lg, .modal-xl{
                                max-width: 1700px;
                            }
                            .o_form_label{
                                white-space: nowrap;
                            }
                            .o_form_view .oe_avatar > img {
                                max-width : 500px;
                                max-height: 500px;
                            }
                        </style>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="version"/>
                                <field name="type_devis"/>
                                <field name="is_societe_commerciale_id"/>
                                <field name="partner_id"/>
                                <field name="devise_client_id"/>
                                <field name="taux_devise"/>
                                <a href="https://www.xe.com/fr/currencyconverter/convert/?Amount=1&amp;From=CHF&amp;To=EUR" target="_blank">Recherche taux de la devise</a>
                                <field name="nom_affaire"/>
                                <field name="type_cuve_id"/>
                                <field name="designation"/>
                                <field name="designation_complementaire"/>
                                <label for="capacite" string="Capacité"  attrs="{'invisible':[('type_devis','not in',['cuve','bassin'])]}"/>
                                <div class="d-flex"                      attrs="{'invisible':[('type_devis','not in',['cuve','bassin'])]}">
                                    <field name="capacite" readonly="1"/>
                                    <span class="o_form_label mx-3"> </span>
                                    <field name="unite"/>
                                </div>
                            </group>
                            <group>
                                <field name="tax_id"/>
                                <field name="date_creation"/>
                                <field name="date_actualisation" readonly="1"/>
                                <field name="createur_id"/>
                                <field name="montant_matiere" invisible="1"/>
                                <field name="duree_totale"/>
                            </group>
                         </group>
                        <notebook>
                            <page string="Devis">

                                <group string="Dimensions" attrs="{'invisible':[('type_devis','not in',['cuve','bassin'])]}">
                                    <field name="dimension_ids" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="sequence" widget="handle" />
                                            <field name="devis_id" invisible="1"/>
                                            <field name="dimension_id"/>
                                            <field name="valeur"/>
                                            <field name="unite_id"/>
                                            <field name="description"/>
                                            <field name="imprimer"/>
                                        </tree>
                                    </field>
                                </group>
                                <group>
                                    <group string="Temps" attrs="{'invisible':[('type_devis','not in',['cuve','bassin'])]}">
                                        <field name="tps_montage"    widget="float_time" readonly="1" />
                                        <field name="tps_assemblage" widget="float_time"/>
                                        <field name="tps_majoration" widget="float_time"/>
                                        <field name="tps_minoration" widget="float_time"/>
                                        <field name="tps_total"      widget="float_time"/>
                                        <field name="tps_be"         widget="float_time"/>
                                    </group>
                                </group>
                                <group string="Matières" attrs="{'invisible':[('type_devis','not in',['cuve','bassin'])]}">
                                    <field name="matiere_ids" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="sequence" widget="handle" />
                                            <field name="devis_id" invisible="1"/>
                                            <field name="section_id"/>
                                            <field name="matiere_id"/>
                                            <field name="epaisseur"/>
                                            <field name="poids" sum="Total" readonly="1"/>
                                            <field name="prix_achat"/>
                                            <field name="date_actualisation"/>
                                            <field name="montant" sum="Total"/>
                                            <field name="imprimer"/>
                                        </tree>
                                    </field>
                                </group>
                                <button
                                    name="actualiser_prix_action"
                                    type="object"
                                    string="Actualiser les prix"
                                />
                                <group string="Articles" attrs="{'invisible':[('type_devis','not in',['structure'])]}">
                                    <field name="article_ids" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="sequence" widget="handle" />
                                            <field name="devis_id" invisible="1"/>
                                            <button title="Détail nomenclature et opérations" name="acceder_article_action" type="object" icon="fa-search-plus"/>
                                            <field name="product_id"                optional="show"/>
                                            <field name="product_tmpl_id"           invisible="1"/>
                                            <field name="bom_id"                    optional="show" domain="[('product_tmpl_id', '=', product_tmpl_id)]"/>
                                            <field name="description"/>
                                            <field name="quantite"/>
                                            <field name="cout_matiere_force"        optional="show"/>
                                            <field name="cout_mo_force"             optional="show"/>
                                            <field name="cout_matiere"              optional="show"/>
                                            <field name="cout_mo"                   optional="show"/>
                                            <field name="total_matiere" sum="Total" optional="show"/>
                                            <field name="total_mo"      sum="Total" optional="show"/>
                                            <field name="duree_totale"  sum="Total" optional="show" widget="float_time"/>
                                        </tree>
                                    </field>
                                </group>
                                <group string="Options">
                                    <field name="options_ids" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="sequence" widget="handle" />
                                            <field name="devis_id" invisible="1"/>
                                            <field name="option_id"          class="test_scss"/>
                                            <field name="option_active"/>
                                            <field name="option_comprise"/>
                                            <field name="thermoregulation"    optional="hide"/>
                                            <field name="description"         optional="show" class="test_scss" />
                                            <field name="description_client"  optional="show" class="test_scss"/>
                                            <field name="valeur"              optional="show"/>
                                            <field name="quantite"            optional="show"/>
                                            <field name="prix"                optional="show"/>
                                            <field name="montant"     sum="Total" optional="show"/>
                                            <field name="montant_int" sum="Total" optional="hide"/>
                                            <field name="entree2"             optional="show"/>
                                            <field name="sortie2"             optional="show"/>
                                        </tree>
                                    </field>
                                </group>
                                <group>
                                    <field name="montant_option_active"/>
                                    <field name="montant_option_comprise"/>
                                    <field name="montant_option_thermo"/>
                                </group>
                                <group string="Sections des équipements" attrs="{'invisible':[('type_devis','not in',['cuve','bassin'])]}">
                                    <field name="section_ids" nolabel="1" readonly="0">
                                        <tree>
                                            <field name="sequence" widget="handle" />
                                            <button title="Section" name="acceder_section_action" type="object" icon="fa-search-plus"/>
                                            <field name="devis_id" invisible="1"/>
                                            <field name="section_id"/>
                                            <field name="montant_total"            sum="Total"/>
                                            <field name="montant_total_avec_marge" sum="Total"/>
                                            <field name="tps_montage"              sum="Total" widget="float_time"/>
                                        </tree>
                                    </field>
                                </group>
                                <button
                                    name="actualiser_prix_action"
                                    type="object"
                                    string="Actualiser les prix"
                                />
                                <group string="Variantes">
                                    <field name="variante_ids" nolabel="1" readonly="1">
                                        <tree>
                                            <button title="Variante" name="acceder_variante_action" type="object" icon="fa-search-plus"/>
                                            <field name="devis_id" invisible="1"/>
                                            <field name="name"              optional="show"/>
                                            <field name="duree_unitaire"    optional="hide" widget="float_time" sum="Total"/>
                                            <field name="quantite"          optional="show"/>
                                            <field name="cout_transport"    optional="hide"/>
                                            <field name="marge_matiere"     optional="hide"/>
                                            <field name="marge_equipement"  optional="hide"/>
                                            <field name="marge_option"      optional="hide"/>
                                            <field name="marge_montage"     optional="hide"/>
                                            <field name="tps_be"            optional="hide" widget="float_time"/>
                                            <field name="marge_be"          optional="hide"/>
                                            <field name="marge_revendeur"   optional="hide"/>
                                            <field name="gain_productivite" optional="hide"/>
                                            <field name="remise"            optional="hide"/>
                                            <field name="remise_pourcent"   optional="hide"/>
                                            <field name="prix_vente_lot"              optional="show"/>
                                            <field name="prix_vente_revendeur_lot"    optional="hide"/>
                                            <field name="montant_marge_lot"           optional="hide"/>
                                            <field name="montant_marge_revendeur_lot" optional="hide"/>
                                            <field name="prix_vente"                  optional="show"/>
                                            <field name="montant_marge"               optional="hide"/>
                                            <field name="taux_marge_commerciale"      optional="hide"/>
                                            <field name="prix_vente_revendeur"        optional="hide"/>
                                            <field name="prix_vente_revendeur_int"    optional="hide"/>
                                            <field name="montant_marge_revendeur"     optional="hide"/>
                                        </tree>
                                    </field>
                                </group>
                                <group>
                                    <field name="commentaire"/>
                                </group>
                            </page>
                            <page string="Descriptif bassin" attrs="{'invisible':[('type_devis','!=','bassin')]}">
                                <group>
                                    <field name="descriptif" attrs="{'required':  [('type_devis', '=', 'bassin')]}" nolabel="1"/>
                                </group>
                                <group>
                                    <field name="variante_id"/>
                                </group>
                            </page>


                            <page string="Affaires">
                                <field name="affaire_ids">
                                    <tree>
                                        <button title="Affaire" name="acceder_affaire_action" type="object" icon="fa-search-plus"/>
                                        <field name="date_modification"/>
                                        <field name="partner_id"/>
                                        <field name="name"/>
                                        <field name="code_affare"/>
                                        <field name="version"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Calculs">
                                <group string="Calculs"/>
                                <field name="calcul_ids" nolabel="1">
                                    <tree editable="bottom" limit="2000">
                                        <field name="sequence" widget="handle" />
                                        <field name="devis_parametrable_id" invisible="1"/>
                                        <field name="name"/>
                                        <field name="description"/>
                                        <field name="formule"/>
                                        <field name="formule_odoo" optional="hide"/>
                                        <field name="resultat"/>
                                        <field name="unite"/>
                                        <field name="lien_id" optional="hide"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>


                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>
        <record id="is_devis_parametrable_search" model="ir.ui.view">
            <field name="name">is.devis.parametrable.search</field>
            <field name="model">is.devis.parametrable</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="version"/>
                    <field name="type_devis"/>
                    <field name="nom_affaire"/>
                    <field name="designation"/>
                    <field name="partner_id"/>
                    <field name="createur_id"/>
               </search>
            </field>
        </record>
        <record id="is_devis_parametrable_action" model="ir.actions.act_window">
            <field name="name">Devis paramètrable</field>
            <field name="res_model">is.devis.parametrable</field>
            <field name="view_mode">tree,form</field>
        </record>



        <!-- is.devis.parametrable.variante -->
        <record id="is_devis_parametrable_variante_tree" model="ir.ui.view">
            <field name="name">is_devis_parametrable_variante_tree</field>
            <field name="model">is.devis.parametrable.variante</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="devis_id"/>
                    <field name="is_societe_commerciale_id" optional="show"/>
                    <field name="partner_id" optional="show"/>
                    <field name="devise_client_id" optional="hide"/>
                    <field name="name" optional="show"/>
                    <field name="quantite" optional="show"/>
                    <field name="montant_unitaire"       optional="show"/>
                    <field name="prix_vente"             optional="show"/>
                    <field name="montant_marge"          optional="show"/>
                    <field name="taux_marge_commerciale" optional="show"/>
                    <field name="intitule_remise" optional="hide"/>
                </tree>
            </field>
        </record>


        <record id="is_devis_parametrable_variante_form" model="ir.ui.view">
            <field name="name">is.devis.parametrable.variante.form</field>
            <field name="model">is.devis.parametrable.variante</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <style>
                            body{
                                line-height:1.2;
                            }
                            .o_form_view .o_group{
                                margin-top: 0px;
                            }
                            .o_form_view .o_form_sheet_bg > .o_form_sheet{
                                max-width: 1800px;
                            }
                            .o_form_label{
                                white-space: nowrap;
                            }
                            .description{
                                font-weight: bold;
                                font-size: 12pt;
                            }
                        </style>
                        <group>
                            <field name="description"       nolabel="1" class="description"/>
                        </group>
                        <group>
                            <group string="Paramètres">
                                <field name="devis_id"               readonly="1"/>
                                <field name="type_devis"/>
                                <field name="capacite"               invisible="1"/>
                                <field name="unite"                  invisible="1"/>
                                <field name="is_societe_commerciale_id" readonly="1"/>
                                <field name="partner_id"                readonly="1"/>
                                <field name="name"/>
                                <field name="description_libre"          attrs="{'required':[('type_devis','=','structure')]}"/>
                                <field name="description_complementaire" attrs="{'invisible':[('type_devis','!=','structure')]}"/>
                                <field name="quantite"                   attrs="{'invisible':[('type_devis','=','bassin')]}"/>
                                <field name="cout_horaire_montage"       attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="cout_horaire_be"            attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="cout_transport"/>
                                <field name="marge_matiere"/>
                                <field name="marge_equipement"     attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="marge_option"/>
                                <field name="marge_montage"/>
                                <field name="marge_be"             attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="marge_revendeur"/>
                                <field name="gain_productivite"/>
                                <field name="remise"/>
                                <field name="remise_pourcent"/>
                            </group>
                            <group string="Temps unitaire">
                                <field name="duree_unitaire" widget="float_time" attrs="{'invisible':[('type_devis','!=','structure')]}"/>
                                <field name="tps_montage"    widget="float_time" attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="tps_assemblage" widget="float_time" attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="tps_majoration" widget="float_time" attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="tps_minoration" widget="float_time" attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="tps_total"      widget="float_time" attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <field name="tps_be"         widget="float_time" attrs="{'invisible':[('type_devis','=','structure')]}"/>
                            </group>
                        </group>
                        <group>
                            <group string="Prix de revient de l'affaire">
                                <field name="currency_id" invisible="1"/>
                                <!-- <field name="tps_montage" widget="float_time"/> -->

                                <label for="montant_matiere"/>
                                <div class="o_row no-gutters d-flex">
                                    <field name="montant_matiere_pourcent" widget="progressbar" class="oe_inline"/>
                                    <field name="montant_matiere" class="oe_inline"/>
                                </div>

                                <label for="montant_equipement" attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <div class="o_row no-gutters d-flex" attrs="{'invisible':[('type_devis','=','structure')]}">
                                    <field name="montant_equipement_pourcent" widget="progressbar" class="oe_inline"/>
                                    <field name="montant_equipement" class="oe_inline"/>
                                </div>

                                <label for="montant_option"/>
                                <div class="o_row no-gutters d-flex">
                                    <field name="montant_option_pourcent" widget="progressbar" class="oe_inline"/>
                                    <field name="montant_option" class="oe_inline"/>
                                </div>


                                <label for="montant_montage_productivite"/>
                                <div class="o_row no-gutters d-flex">
                                    <field name="montant_montage_productivite_pourcent" widget="progressbar" class="oe_inline"/>
                                    <field name="montant_montage_productivite" class="oe_inline"/>
                                </div>

                                <label for="montant_be" attrs="{'invisible':[('type_devis','=','structure')]}"/>
                                <div class="o_row no-gutters d-flex" attrs="{'invisible':[('type_devis','=','structure')]}">
                                    <field name="montant_be_pourcent" widget="progressbar" class="oe_inline"/>
                                    <field name="montant_be" class="oe_inline"/>
                                </div>

                                <label for="montant_transport"/>
                                <div class="o_row no-gutters d-flex">
                                    <field name="montant_transport_pourcent" widget="progressbar" class="oe_inline"/>
                                    <field name="montant_transport" class="oe_inline"/>
                                </div>
                                <field name="montant_total"/>
                            </group>

                            <group string="Bassin" attrs="{'invisible':[('type_devis','!=','bassin')]}">
                                <field name="montant_bassin"/>
                                <field name="montant_bassin_marge"/>
                                <field name="montant_bassin_marge_devise"/>
                            </group>


                            <group string="Prix de revient unitaire" attrs="{'invisible':[('type_devis','=','bassin')]}">
                                <field name="montant_unitaire"/>
                            </group>
                            <group string="Prix de vente de l'affaire">
                                <field name="prix_vente_lot"/>
                                <field name="prix_vente_revendeur_lot"/>
                                <field name="montant_marge_lot"/>
                                <field name="montant_marge_revendeur_lot"/>
                            </group>
                            <group string="Prix de vente unitaire" attrs="{'invisible':[('type_devis','=','bassin')]}">
                                <field name="prix_vente"/>
                                <field name="prix_vente_int"/>
                                <field name="montant_remise" invisible="1"/>
                                <field name="intitule_remise"    attrs="{'invisible':[('montant_remise','=',0)]}"/>
                                <field name="prix_vente_remise"  attrs="{'invisible':[('montant_remise','=',0)]}"/>
                                <field name="montant_marge"/>
                                <field name="taux_marge_brute"/>
                                <field name="taux_marge_commerciale"/>
                                <field name="prix_vente_revendeur"/>
                                <field name="prix_vente_revendeur_int"/>
                                <field name="montant_marge_revendeur"/>
                            </group>
                            <group string="Paramétrage du PDF / Prix à afficher">
                                <field name="prix_a_afficher"/>
                                <field name="impression_matieres"/>
                                <field name="impression_dimensions"/>
                                <field name="impression_options"/>
                                <field name="impression_equipements"/>
                            </group>
                            <group string="Prix de vente unitaire (Devise)">
                                <field name="prix_par_hl"/>
                                <field name="afficher_prix_par_hl"/>
                                <field name="devise_client_id"/>
                                <field name="taux_devise"/>
                                <field name="prix_vente_devise"/>
                                <field name="prix_vente_int_devise"/>
                                <field name="montant_remise_devise" invisible="1"/>
                                <field name="intitule_remise_devise"    attrs="{'invisible':[('montant_remise_devise','=',0)]}"/>
                                <field name="prix_vente_remise_devise"  attrs="{'invisible':[('montant_remise_devise','=',0)]}"/>
                                <field name="prix_par_hl_devise"/>
                            </group>
                         </group>
                        <group>
                            <field name="commentaire"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_devis_parametrable_variante_search" model="ir.ui.view">
            <field name="name">is_devis_parametrable_variante_search</field>
            <field name="model">is.devis.parametrable.variante</field>
            <field name="arch" type="xml">
                <search >
                    <field name="devis_id"/>
                    <field name="partner_id"/>
                    <field name="name"/>
                </search>
            </field>
        </record>
        <record id="is_devis_parametrable_variante_action" model="ir.actions.act_window">
            <field name="name">Variante</field>
            <field name="res_model">is.devis.parametrable.variante</field>
            <field name="view_mode">tree,form</field>
        </record>



        <!-- is.devis.parametrable.section -->
        <record id="is_devis_parametrable_section_tree" model="ir.ui.view">
            <field name="name">is.devis.parametrable.section.tree</field>
            <field name="model">is.devis.parametrable.section</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="devis_id" invisible="1"/>
                    <field name="section_id"/>
                    <field name="montant_total" sum="Total"/>
                    <field name="tps_montage"   sum="Total" widget="float_time"/>
                </tree>
            </field>
        </record>
        <record id="is_devis_parametrable_section_form" model="ir.ui.view">
            <field name="name">is.devis.parametrable.section.form</field>
            <field name="model">is.devis.parametrable.section</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <style>
                            .o_form_view .o_form_sheet_bg > .o_form_sheet{
                                max-width: 1800px;
                            }
                        </style>
                        <group>
                            <group>
                                <field name="devis_id" invisible="1"/>
                                <field name="section_id"/>
                                <field name="tps_montage" widget="float_time"/>

                                <field name="type_devis" invisible="1"/>


                            </group>
                         </group>
                        <field name="product_ids">
                            <tree editable="bottom">
                                <field name="section_id" invisible="1"/>
                                <field name="sequence" widget="handle"/>
                                <field name="type_equipement_id" class="test_scss"/>
                                <field name="product_id" domain="[('is_type_equipement_id', '=', type_equipement_id)]" class="test_scss"/>
                                <field name="description"/>
                                <field name="description_detaillee" attrs="{'column_invisible':[('parent.type_devis','!=','bassin')]}" optional="show"/>
                                <field name="quantite"                   sum="Total"/>
                                <field name="uom_po_id"   optional="hide"/>
                                <field name="prix"        optional="show"/>
                                <field name="date_achat"  optional="hide"/>
                                <field name="montant"     optional="show" sum="Total"/>
                                <field name="marge"       optional="show"/>
                                <field name="marge_equipement_variante" optional="hide"/>
                                <field name="montant_avec_marge"        optional="show" sum="Total"/>
                                <field name="prix_avec_marge_devise"    optional="hide"/>
                                <field name="montant_avec_marge_devise" optional="hide" sum="Total"/>
                                <field name="devise_client_id" invisible="1"/>
                                <field name="tps_montage"        optional="show" sum="Total" widget="float_time"/>
                                <field name="tps_montage_force"  optional="show" sum="Total" widget="float_time"/>
                            </tree>
                        </field>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_devis_parametrable_section_search" model="ir.ui.view">
            <field name="name">is.devis.parametrable.section.search</field>
            <field name="model">is.devis.parametrable.section</field>
            <field name="arch" type="xml">
                <search>
                    <field name="devis_id"/>
                    <!-- <field name="section_devis type_equipement_id"/> -->
               </search>
            </field>
        </record>
        <record id="is_devis_parametrable_section_action" model="ir.actions.act_window">
            <field name="name">Sections des devis</field>
            <field name="res_model">is.devis.parametrable.section</field>
            <field name="view_mode">tree,form</field>
        </record>




        <!-- is.type.equipement -->
        <record id="is_type_equipement_tree" model="ir.ui.view">
            <field name="name">is.type.equipement.tree</field>
            <field name="model">is.type.equipement</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name"/>
                    <field name="quantite_id"/>
                    <field name="prix_id"/>
                    <!-- <field name="description_id"/> -->
                    <field name="tps_montage" widget="float_time"/>
                </tree>
            </field>
        </record>
        <record id="is_type_equipement_form" model="ir.ui.view">
            <field name="name">is.type.equipement.form</field>
            <field name="model">is.type.equipement</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name" />
                                <field name="quantite_id"/>
                                <field name="prix_id"/>
                                <!-- <field name="description_id"/> -->
                                <field name="tps_montage" widget="float_time"/>
                            </group>
                         </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_type_equipement_search" model="ir.ui.view">
            <field name="name">is.type.equipement.search</field>
            <field name="model">is.type.equipement</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
               </search>
            </field>
        </record>
        <record id="is_type_equipement_action" model="ir.actions.act_window">
            <field name="name">Type d'équipement</field>
            <field name="res_model">is.type.equipement</field>
            <field name="view_mode">tree,form</field>
        </record>


        <!-- is.section.devis -->
        <record id="is_section_devis_tree" model="ir.ui.view">
            <field name="name">is.section.devis.tree</field>
            <field name="model">is.section.devis</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name"/>
                    <field name="epaisseur_matiere_id"/>
                    <field name="poids_matiere_id"/>
                </tree>
            </field>
        </record>
        <record id="is_section_devis_form" model="ir.ui.view">
            <field name="name">is.section.devis.form</field>
            <field name="model">is.section.devis</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name" />
                                <field name="epaisseur_matiere_id"/>
                                <field name="poids_matiere_id"/>
                            </group>
                         </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_section_devis_search" model="ir.ui.view">
            <field name="name">is.section.devis.search</field>
            <field name="model">is.section.devis</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
               </search>
            </field>
        </record>
        <record id="is_section_devis_action" model="ir.actions.act_window">
            <field name="name">Section devis</field>
            <field name="res_model">is.section.devis</field>
            <field name="view_mode">tree,form</field>
        </record>


        <!-- is.type.cuve -->
        <record id="is_type_cuve_tree" model="ir.ui.view">
            <field name="name">is.type.cuve.tree</field>
            <field name="model">is.type.cuve</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name"/>
                    <field name="pourcentage_perte_matiere"/>
                </tree>
            </field>
        </record>
        <record id="is_type_cuve_form" model="ir.ui.view">
            <field name="name">is.type.cuve.form</field>
            <field name="model">is.type.cuve</field>
            <field name="arch" type="xml">
                <form>
                     <sheet>
                        <style>
                            .o_form_label{
                                white-space: nowrap;
                            }
                            .o_form_view .oe_avatar > img {
                                max-width : 900px;
                                max-height: 900px;
                            }
                        </style>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="pourcentage_perte_matiere"/>
                                <field name="import_ids" widget="many2many_binary"/>
                            </group>
                         </group>
                          <group>
                            <button 
                                name="import_fichier_xlsx_action" 
                                string="Importer fichier .xlsx" type="object" 
                            />
                        </group>
                        <field name="calcul_ids" nolabel="1">
                            <tree editable="bottom" limit="2000">
                                <field name="sequence" widget="handle" />
                                <field name="type_cuve_id" invisible="1"/>
                                <field name="name"  attrs="{'readonly': [('proteger','=',True)]}"/>
                                <field name="description" attrs="{'readonly': [('proteger','=',True)]}"/>
                                <field name="formule" attrs="{'readonly': [('proteger_formule','=',True)]}"/>
                                <field name="formule_odoo" readonly="1" optional="hide"/>
                                <field name="resultat"     readonly="1"/>
                                <field name="unite"    attrs="{'readonly': [('proteger','=',True)]}"/>
                                <field name="lien_id"  attrs="{'readonly': [('proteger','=',True)]}"/>
                                <field name="proteger"         optional="hide"/>
                                <field name="proteger_formule" invisible="1"/>
                            </tree>
                        </field>
                        <group>
                            <field name="image" widget='image' class="oe_center oe_avatar" nolabel="1"/>
                        </group>
                   </sheet>
                </form>
            </field>
        </record>
        <record id="is_type_cuve_search" model="ir.ui.view">
            <field name="name">is.type.cuve.search</field>
            <field name="model">is.type.cuve</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
               </search>
            </field>
        </record>
        <record id="is_type_cuve_action" model="ir.actions.act_window">
            <field name="name">Type de fabrication</field>
            <field name="res_model">is.type.cuve</field>
            <field name="view_mode">tree,form</field>
        </record>


        <!-- is.matiere -->
        <record id="is_matiere_tree" model="ir.ui.view">
            <field name="name">is.matiere.tree</field>
            <field name="model">is.matiere</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name"/>
                    <field name="prix_achat"/>
                    <field name="date_actualisation"/>
                    <field name="type_matiere" />
                    <field name="finition_interieur" />
                    <field name="finition" />
                </tree>
            </field>
        </record>
        <record id="is_matiere_form" model="ir.ui.view">
            <field name="name">is.matiere.form</field>
            <field name="model">is.matiere</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <style>
                            .o_form_label{
                                white-space: nowrap;
                            }
                        </style>
                        <group>
                            <group>
                                <field name="name" />
                                <field name="prix_achat"/>
                                <field name="date_actualisation"/>
                                <field name="type_matiere" />
                                <field name="finition_interieur" />
                                <field name="finition" />
                            </group>
                         </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_matiere_search" model="ir.ui.view">
            <field name="name">is.matiere.search</field>
            <field name="model">is.matiere</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
               </search>
            </field>
        </record>
        <record id="is_matiere_action" model="ir.actions.act_window">
            <field name="name">Matière</field>
            <field name="res_model">is.matiere</field>
            <field name="view_mode">tree,form</field>
        </record>



        <!-- is.dimension -->
        <record id="is_dimension_tree" model="ir.ui.view">
            <field name="name">is.dimension.tree</field>
            <field name="model">is.dimension</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name"/>
                    <field name="lien_id"/>
                </tree>
            </field>
        </record>
        <record id="is_dimension_form" model="ir.ui.view">
            <field name="name">is.dimension.form</field>
            <field name="model">is.dimension</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name" />
                                <field name="lien_id" />
                            </group>
                         </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_dimension_search" model="ir.ui.view">
            <field name="name">is.dimension.search</field>
            <field name="model">is.dimension</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
               </search>
            </field>
        </record>
        <record id="is_dimension_action" model="ir.actions.act_window">
            <field name="name">Dimensions</field>
            <field name="res_model">is.dimension</field>
            <field name="view_mode">tree,form</field>
        </record>


        <!-- is.option -->
        <record id="is_option_tree" model="ir.ui.view">
            <field name="name">is.option.tree</field>
            <field name="model">is.option</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name"/>
                    <field name="thermoregulation"/>
                    <field name="prix"/>
                    <field name="lien_valeur_id"/>
                    <field name="lien_quantite_id"/>
                    <field name="lien_entree2_id"/>
                    <field name="lien_sortie2_id"/>
                    <field name="lien_sortie2_id"/>
                </tree>
            </field>
        </record>
        <record id="is_option_form" model="ir.ui.view">
            <field name="name">is.option.form</field>
            <field name="model">is.option</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <style>
                            .o_form_label{
                                white-space: nowrap;
                            }
                        </style>
                        <group>
                            <field name="name"/>
                            <field name="thermoregulation"/>
                            <field name="prix"/>
                            <field name="lien_valeur_id"/>
                            <field name="lien_quantite_id"/>
                            <field name="lien_entree2_id"/>
                            <field name="lien_sortie2_id"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_option_search" model="ir.ui.view">
            <field name="name">is.option.search</field>
            <field name="model">is.option</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="lien_valeur_id"/>
                    <field name="lien_quantite_id"/>
               </search>
            </field>
        </record>
        <record id="is_option_action" model="ir.actions.act_window">
            <field name="name">Options</field>
            <field name="res_model">is.option</field>
            <field name="view_mode">tree,form</field>
        </record>


        <!-- is.lien.odoo.excel -->
        <record id="is_lien_odoo_excel_tree" model="ir.ui.view">
            <field name="name">is.lien.odoo.excel.tree</field>
            <field name="model">is.lien.odoo.excel</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name"/>
                    <field name="type_lien"/>
                    <field name="commentaire"/>
                </tree>
            </field>
        </record>
        <record id="is_lien_odoo_excel_form" model="ir.ui.view">
            <field name="name">is.lien.odoo.excel.form</field>
            <field name="model">is.lien.odoo.excel</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="type_lien"/>
                                <field name="commentaire"/>
                            </group>
                         </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_lien_odoo_excel_search" model="ir.ui.view">
            <field name="name">is.lien.odoo.excel.search</field>
            <field name="model">is.lien.odoo.excel</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="type_lien"/>
                    <field name="commentaire"/>
               </search>
            </field>
        </record>
        <record id="is_lien_odoo_excel_action" model="ir.actions.act_window">
            <field name="name">Liens Odoo/Excel</field>
            <field name="res_model">is.lien.odoo.excel</field>
            <field name="view_mode">tree,form</field>
        </record>



        <!-- is.devis.parametrable.unite -->
        <record id="is_devis_parametrable_unite_tree" model="ir.ui.view">
            <field name="name">is.devis.parametrable.unite.tree</field>
            <field name="model">is.devis.parametrable.unite</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="is_devis_parametrable_unite_form" model="ir.ui.view">
            <field name="name">is.devis.parametrable.unite.form</field>
            <field name="model">is.devis.parametrable.unite</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                         </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_devis_parametrable_unite_search" model="ir.ui.view">
            <field name="name">is.devis.parametrable.unite.search</field>
            <field name="model">is.devis.parametrable.unite</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
               </search>
            </field>
        </record>
        <record id="is_devis_parametrable_unite_action" model="ir.actions.act_window">
            <field name="name">Unités</field>
            <field name="res_model">is.devis.parametrable.unite</field>
            <field name="view_mode">tree,form</field>
        </record>



        <!-- is.devis.parametrable.article -->
        <record id="is_devis_parametrable_article_tree" model="ir.ui.view">
            <field name="name">is.devis.parametrable.article.tree</field>
            <field name="model">is.devis.parametrable.article</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="devis_id" invisible="1"/>
                    <field name="product_id"/>
                    <field name="bom_id"/>
                    <field name="description"/>
                    <field name="quantite"/>
                    <field name="cout_matiere"/>
                    <field name="cout_mo"/>
                </tree>
            </field>
        </record>
        <record id="is_devis_parametrable_article_form" model="ir.ui.view">
            <field name="name">is.devis.parametrable.article.form</field>
            <field name="model">is.devis.parametrable.article</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button 
                            name="actualiser_nomenclatre_action" 
                            string="Actualiser la nomenclature et les opérations" type="object" 
                        />
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="devis_id" invisible="1"/>
                                <field name="product_id"/>
                                <field name="product_tmpl_id" invisible="1"/>
                                <field name="bom_id" domain="[('product_tmpl_id', '=', product_tmpl_id)]"/>
                                <field name="description"/>
                                <field name="quantite"/>
                            </group>
                            <group>
                                <field name="cout_matiere"/>
                                <field name="cout_mo"/>
                            </group>
                         </group>


                         <notebook>
                            <page string="Nomenclature">
                                <group>
                                    <field name="nomenclature_ids" nolabel="1">
                                        <tree editable="bottom" decoration-muted="type_article == 'compose'">
                                            <field name="sequence" widget="handle" />
                                            <field name="article_id" invisible="1"/>
                                            <field name="niveau"       optional="hide"/>
                                            <field name="type_article" optional="hide"/>
                                            <field name="product_id"   optional="hide" widget="many2one_clickable"/>
                                            <field name="designation"  optional="show"/>
                                            <field name="product_qty"/>
                                            <field name="uom_id"/>
                                            <field name="cout"/>
                                            <field name="montant" sum="Total"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page string="Opérations">
                                <group>
                                    <field name="operation_ids" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="sequence" widget="handle" />
                                            <field name="article_id" invisible="1"/>
                                            <field name="product_id" optional="show" widget="many2one_clickable"/>
                                            <field name="niveau"     optional="hide"/>
                                            <field name="product_qty"/>
                                            <field name="operation"/>
                                            <field name="workcenter_id"/>
                                            <field name="duree" widget="float_time"/>
                                            <field name="cout_horaire"/>
                                            <field name="montant"      sum="Total"/>
                                            <field name="duree_totale" sum="Total" optional="show" widget="float_time"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="is_devis_parametrable_article_search" model="ir.ui.view">
            <field name="name">is.devis.parametrable.article.search</field>
            <field name="model">is.devis.parametrable.article</field>
            <field name="arch" type="xml">
                <search>
                    <field name="product_id"/>
                    <field name="description"/>
               </search>
            </field>
        </record>
    </data>
</odoo>
